<%- include("layout.html") %>

<h2 class="text-2xl font-bold mb-6">ðŸ“Š Subscriber Statistics</h2>

<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-10">

  <% Object.keys(stats).forEach(p => { %>
    <div class="bg-slate-800 border border-slate-700 rounded-2xl p-6">
      <h3 class="text-xl font-bold mb-4"><%= p %></h3>

      <p class="text-slate-400">Total sold: <b><%= stats[p].count %></b></p>
      <p class="text-green-400">Actives: <b><%= stats[p].active %></b></p>
      <p class="text-red-400">Expired: <b><%= stats[p].expired %></b></p>
    </div>
  <% }) %>

</div>

<h3 class="text-xl font-semibold mb-4">ðŸ“‹ Complete list of subscribers</h3>

<table class="w-full text-left border-collapse">
  <thead class="bg-slate-700 text-slate-300">
    <tr>
      <th class="p-3">User</th>
      <th class="p-3">Plan</th>
      <th class="p-3">Status</th>
      <th class="p-3">End</th>
    </tr>
  </thead>
  <tbody>

  <% subs.forEach(s => { %>
    <tr class="border-b border-slate-700">
      <td class="p-3"><%= s.userId %></td>
      <td class="p-3"><%= s.planName %></td>
      <td class="p-3">
        <% if (s.active) { %>
          <span class="text-green-400">Activo</span>
        <% } else { %>
          <span class="text-red-400">Expirado</span>
        <% } %>
      </td>
      <td class="p-3"><%= new Date(s.endAt).toLocaleString() %></td>
    </tr>
  <% }) %>

  </tbody>
</table>
